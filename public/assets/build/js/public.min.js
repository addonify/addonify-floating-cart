"use strict";function _typeof(a){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}!function(c){var e,t=c("#adfy__woofc-coupon-container"),i=1==addonifyFloatingCartJSObject.addonifyFloatingCartNotifyShow,a=addonifyFloatingCartJSObject.addonifyFloatingCartNotifyDuration,d=1==addonifyFloatingCartJSObject.addonifyFloatingCartNotifyDismissible,r=1==addonifyFloatingCartJSObject.displayToastNotificationButton,s=addonifyFloatingCartJSObject.addonifyFloatingCartNotifyMessage,f=addonifyFloatingCartJSObject.toast_notification_display_position.split("-"),l=addonifyFloatingCartJSObject.open_cart_modal_immediately_after_add_to_cart,o=addonifyFloatingCartJSObject.open_cart_modal_after_click_on_view_cart,_=addonifyFloatingCartJSObject.states,p=c(".adfy__woofc-cart-summary ul li.sub-total"),u=c(".adfy__woofc-cart-summary ul li.discount"),y=c(".adfy__woofc-colophon"),h=c(".adfy__woofc-shipping-bar"),m=c(".adfy__woofc-cart-summary"),g={init:function(){this.preventDefaultBehaviour(),this.showFloatingCartHandler(),this.hideFloatingCartHandler(),this.checkShoppingMeterProgessbarAnimation(),this.quantityFormInputHandler(),this.handleFloatingCartCoupon(),this.notifyFloatingCartEventHandler(),this.handleCartItems(),this.shippingSectionHandler(),this.refreshCart()},preventDefaultBehaviour:function(){c(document).on("click",".adfy__woofc-prevent-default",function(a){a.preventDefault()})},showFloatingCartHandler:function(){c(document).on("click",".adfy__show-woofc",function(){document.body.classList.add("adfy__woofc-visible")}),c(document).on("click",".added_to_cart.wc-forward",function(a){"1"===o&&(a.preventDefault(),document.body.classList.add("adfy__woofc-visible"))}),c(document.body).on("added_to_cart",function(a,t,o,n){var e,i;"1"===l&&document.body.classList.add("adfy__woofc-visible"),c("#adfy__woofc-cart-errors").html("").addClass("hidden"),y.hasClass("adfy__woofc-hidden")&&y.removeClass("adfy__woofc-hidden"),m.hasClass("discount")&&(e=c(".adfy__woofc-cart-summary li.sub-total"),i=c(".adfy__woofc-cart-summary li.discount"),e.hasClass("adfy__woofc-hidden")&&e.removeClass("adfy__woofc-hidden"),i.hasClass("adfy__woofc-hidden")&&i.removeClass("adfy__woofc-hidden")),h.hasClass("adfy__woofc-hidden")&&h.removeClass("adfy__woofc-hidden"),g.checkShoppingMeterProgessbarAnimation()}),c(document.body).on("wc_cart_emptied",function(a){y.addClass("adfy__woofc-hidden"),h.addClass("adfy__woofc-hidden"),g.checkShoppingMeterProgessbarAnimation()})},hideFloatingCartHandler:function(){c(document).on("click",".adfy__hide-woofc",function(){document.body.classList.remove("adfy__woofc-visible")})},checkShoppingMeterProgessbarAnimation:function(){"100"===c(".adfy__woofc-shipping-bar .progress-bars .progress-bar").attr("data_percentage")?c(".adfy__woofc-shipping-bar .progress-bars .progress-bar").addClass("hide-animation"):c(".adfy__woofc-shipping-bar .progress-bars .progress-bar").removeClass("hide-animation")},notifyFloatingCartEventHandler:function(){var o=r?addonifyFloatingCartJSObject.toastNotificationButton:"",n=new Notyf({duration:a,dismissible:d,ripple:!0,position:{x:f[1],y:f[0]}});c(document).on("added_to_cart",function(a,t){i&&(e=t.product.charAt(0).toUpperCase()+t.product.slice(1),n.success({className:"adfy__woofc-notfy-success",message:s.replace("{product_name}",e)+" "+o}).on("click",function(a){a.target,a.event;r&&c("body").addClass("adfy__woofc-visible")}))})},quantityFormInputHandler:function(){function t(a,t,o){var o=2<arguments.length&&void 0!==o?o:1,n="add"===t?c(a).next():"sub"===t?c(a).prev():c(a),e=c(a).attr("data-product_id"),i=c(a).attr("data-cart_item_key"),d=c(a).parents(".adfy__woofc-item");c("#adfy__woofc-spinner-container").addClass("visible").removeClass("hidden"),c.ajax({type:"POST",dataType:"json",url:addonifyFloatingCartJSObject.ajax_url,data:{action:addonifyFloatingCartJSObject.ajax_update_cart_item_action,product_id:e,cart_item_key:i,nonce:addonifyFloatingCartJSObject.nonce,type:t,quantity:o},success:function(a){var t;a&&!a.error&&((t=a.fragments)&&c.each(t,function(a,t){c(a).replaceWith(t)}),"OoS"===(t=a.nQuantity)?(alert("Out of stock range"),n.val(t)):"nil"!==t&&n.val(t),d.find(c(".adfy__woofc-item-price-multiplier-quantity")).html(t),d.unblock(),c(document.body).trigger("wc_update_cart"))},error:function(a){console.log("Error processing request")}}).always(function(){c("#adfy__woofc-spinner-container").addClass("hidden").removeClass("visible"),g.checkShoppingMeterProgessbarAnimation()})}c(document).on("click",".adfy__woofc-item .adfy__woofc-inc-quantity",function(a){a.preventDefault();a=c(this).prev();(parseInt(a.val())<parseInt(a.attr("max"))||""==a.attr("max"))&&t(this,"add")}),c(document).on("click",".adfy__woofc-item .adfy__woofc-dec-quantity",function(a){a.preventDefault();a=c(this).next();parseInt(a.val())<=parseInt(a.attr("min"))||t(this,"sub")}),c(document).on("change",".adfy__woofc-item .adfy__woofc-quantity-input-field",function(a){a.preventDefault(),t(this,"update",c(this).val())})},handleFloatingCartCoupon:function(){function n(a){a=0<arguments.length&&void 0!==a&&a;!1!==a&&c(".adfy__woofc-alert.success").html('<p class="adfy__woofc-alert-text">\n                            <svg fill="currentColor" viewBox="0 0 16 16">\n                                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/>\n                            </svg>\n                            '+a+"\n                        </p>"),c(".adfy__woofc-alert.success").fadeIn(),setTimeout(function(){c(".adfy__woofc-alert.success").fadeOut()},3e3)}function e(a){a=0<arguments.length&&void 0!==a&&a;!1!==a&&c(".adfy__woofc-alert.error").html('<p class="adfy__woofc-alert-text">\n                            <svg fill="currentColor" viewBox="0 0 16 16">\n                            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/>\n                            </svg>\n                            '+a+"\n                        </p>"),c(".adfy__woofc-alert.error").fadeIn(),setTimeout(function(){c(".adfy__woofc-alert.error").fadeOut()},3e3)}c(document).on("click","#adfy__woofc-coupon-trigger",function(a){a.preventDefault(),t.attr("data_display","visible")}),c(document).on("click","#adfy__woofc-hide-coupon-container",function(){t.attr("data_display","hidden")}),c(document).on("submit","#adfy__woofc-coupon-form",function(a){a.preventDefault();var o=c(this).find("input[name=adfy__woofc-coupon-input-field]"),a=o.val();c.ajax({url:addonifyFloatingCartJSObject.ajax_url,method:"post",data:{action:addonifyFloatingCartJSObject.ajax_apply_coupon,nonce:addonifyFloatingCartJSObject.nonce,form_data:a},success:function(a){var t=JSON.parse(a);!0===t.couponApplied?(o.val(""),c.each(t.html,function(a,t){c(a).replaceWith(t)}),n(t.status),c(document.body).trigger("applied_coupon",[a]),0<t.appliedCoupons&&p.hasClass("adfy__woofc-hidden")&&u.hasClass("adfy__woofc-hidden")&&(p.removeClass("adfy__woofc-hidden"),u.removeClass("adfy__woofc-hidden"))):e(t.status)},error:function(a){alert("Error processing request")}})}),c(document).on("click",".adfy__woofc-remove-applied-coupon-button",function(){var t=c(this).closest("li"),o=c(this).attr("data-coupon");c.ajax({url:addonifyFloatingCartJSObject.ajax_url,method:"post",data:{action:addonifyFloatingCartJSObject.ajax_remove_coupon,nonce:addonifyFloatingCartJSObject.nonce,form_data:o},success:function(a){a=JSON.parse(a);!0===a.couponRemoved?(c.each(a.html,function(a,t){c(a).replaceWith(t)}),c(document.body).trigger("removed_coupon",[o]),n(a.status),0!==a.appliedCoupons||p.hasClass("adfy__woofc-hidden")||u.hasClass("adfy__woofc-hidden")||(p.addClass("adfy__woofc-hidden"),u.addClass("adfy__woofc-hidden"))):e(a.status),t.remove()},error:function(a){alert("Error processing request")}})})},handleCartItems:function(){c(document).on("click",".adfy__woofc-item .thumb .product-remove",function(a){a.preventDefault();var o=c(this).attr("data-product_id"),a=c(this).attr("data-cart_item_key"),n=(c(this).parents(".adfy__woofc-item"),c(this));c("#adfy__woofc-spinner-container").addClass("visible").removeClass("hidden"),c.ajax({type:"POST",dataType:"json",url:addonifyFloatingCartJSObject.ajax_url,data:{action:addonifyFloatingCartJSObject.ajax_remove_from_cart_action,product_id:o,cart_item_key:a,nonce:addonifyFloatingCartJSObject.nonce},success:function(a){var t;a&&!1!==a.success?(c(".post-"+o).find("a.wc-forward").remove(),c(".post-"+o).find("a.add_to_cart_button").removeClass("added"),(t=a.fragments)&&c.each(t,function(a,t){c(a).replaceWith(t)}),c("#adfy__woofc-cart-errors").html(a.undo_product_link).removeClass("hidden"),0===a.cart_items_count&&(c(document.body).trigger("wc_cart_emptied"),c(".adfy__woofc-content-entry").html(a.empty_cart_message)),c(document.body).trigger("removed_from_cart",[a.fragments,a.cart_hash,n]),c(document.body).trigger("wc_update_cart")):c("#adfy__woofc-cart-errors").html(a.message).removeClass("hidden")},error:function(a){console.log("Error processing request")}}).always(function(){c("#adfy__woofc-spinner-container").addClass("hidden").removeClass("visible"),g.checkShoppingMeterProgessbarAnimation()})}),c(document).on("click","#adfy__woofc_restore_item",function(a){a.preventDefault();a=c(this).attr("data-item_key");c("#adfy__woofc-spinner-container").addClass("visible").removeClass("hidden"),c.ajax({type:"POST",dataType:"json",url:addonifyFloatingCartJSObject.ajax_url,data:{action:addonifyFloatingCartJSObject.ajax_restore_in_cart_action,cart_item_key:a,nonce:addonifyFloatingCartJSObject.nonce},success:function(a){a&&(a.fragments&&c.each(a.fragments,function(a,t){c(a).replaceWith(t)}),y.hasClass("adfy__woofc-hidden")&&y.removeClass("adfy__woofc-hidden"),h.hasClass("adfy__woofc-hidden")&&h.removeClass("adfy__woofc-hidden"),c("#adfy__woofc-cart-errors").html("").addClass("hidden"),a.error&&console.log(a.messsage))}}).always(function(){c("#adfy__woofc-spinner-container").addClass("hidden").removeClass("visible"),g.checkShoppingMeterProgessbarAnimation()})})},shippingSectionHandler:function(){c(document).on("click","#adfy__woofc-shipping-trigger",function(a){a.preventDefault(),c("#adfy__woofc-shipping-container").attr("data_display","visible")}),c(document).on("click","#adfy__woofc-hide-shipping-container",function(){c("#adfy__woofc-shipping-container").attr("data_display","hidden")}),c(document).on("click","#adfy__woofc-shipping-form .adfy__woofc-shipping-address-form-toggle-button",function(a){a.preventDefault(),"none"===c(".adfy__woofc-shipping-form-elements").css("display")?c(".adfy__woofc-shipping-form-elements").show():c(".adfy__woofc-shipping-form-elements").hide()}),c(document).on("submit","#adfy__woofc-shipping-form",function(a){a.preventDefault();var a=c("#addonify_floating_cart_shipping_country").val(),t=c("#addonify_floating_cart_shipping_state").val(),o=c("#addonify_floating_cart_shipping_city").val(),n=c("#addonify_floating_cart_shipping_postcode").val(),e=c("#addonify-floating-cart-shipping-nonce").val();c.ajax({url:addonifyFloatingCartJSObject.ajax_url,method:"POST",data:{action:addonifyFloatingCartJSObject.updateShippingInfo,calc_shipping_country:a,calc_shipping_state:t,calc_shipping_city:o,calc_shipping_postcode:n,nonce:e},success:function(a){a&&a.fragments&&c.each(a.fragments,function(a,t){""!==t?c(a).replaceWith(t):c(a).html(t)})},failure:function(){console.log("Request failed! Are we offline?")}})}),c(document).on("change","#addonify_floating_cart_shipping_country",function(){var a=c(this).val(),t=c("#addonify_floating_cart_shipping_state"),o=_[a];if(t.siblings("span.select2").remove(),"object"===_typeof(o)&&0<Object.keys(o).length){var n,e,i="";for(n in o)i+='<option value="'+n+'">'+o[n]+"</option>";"input"===t.prop("tagName").toLowerCase()&&(a=t.parent(),t.remove(),(e=c(document.createElement("select"))).addClass("state_select").prop("id","addonify_floating_cart_shipping_state").prop("name","addonify_floating_cart_shipping_state"),e.prop("data-placeholder","State / County"),a.append(e)),c("#addonify_floating_cart_shipping_state").html(i)}else o instanceof Array&&0===o.length?(a=t.parent(),t.remove(),(e=c(document.createElement("input"))).addClass("input_text").prop("id","addonify_floating_cart_shipping_state").prop("name","addonify_floating_cart_shipping_state"),e.prop("type","hidden"),a.append(e)):(a=t.parent(),t.remove(),(e=c(document.createElement("input"))).addClass("input_text").prop("id","addonify_floating_cart_shipping_state").prop("name","addonify_floating_cart_shipping_state"),e.prop("placeholder","State / County"),a.append(e))}),c(document).on("change",".shipping_method",function(){var a={};c("select.shipping_method, :input[name^=shipping_method][type=radio]:checked, :input[name^=shipping_method][type=hidden]").each(function(){a[c(this).data("index")]=c(this).val()}),c("#adfy__woofc-spinner-container").addClass("visible").removeClass("hidden"),c.ajax({url:addonifyFloatingCartJSObject.ajax_url,method:"POST",data:{action:addonifyFloatingCartJSObject.updateShippingMethod,nonce:addonifyFloatingCartJSObject.nonce,shipping_method:a},success:function(a){a&&!a.error&&(a=a.fragments)&&c.each(a,function(a,t){""!==t?c(a).replaceWith(t):c(a).html(t)})}}).always(function(){c("#adfy__woofc-spinner-container").addClass("hidden").removeClass("visible")})})},refreshCart:function(){c.post(addonifyFloatingCartJSObject.ajax_url,{action:addonifyFloatingCartJSObject.ajax_refresh_cart_fragments,nonce:addonifyFloatingCartJSObject.nonce},function(a){a&&!a.error&&((a=a.fragments)&&c.each(a,function(a,t){c(a).replaceWith(t)}),c(document.body).trigger("wc_update_cart"),g.checkShoppingMeterProgessbarAnimation())})}};c(document).ready(function(){g.init(),c(".adfy__woofc-alert").hide()})}(jQuery);var init={scrollbar:function(){var a=document.getElementById("adfy__woofc-scrollbar"),t=a.classList.contains("ps");null!=a&&!1===t&&new PerfectScrollbar(a,{wheelSpeed:1,wheelPropagation:!0,minScrollbarLength:20})},observeCart:function(){var a=document.getElementById("adfy__floating-cart");new MutationObserver(function(a){0<a.length&&init.scrollbar()}).observe(a,{attributes:!1,childList:!0,subtree:!0})}};document.addEventListener("DOMContentLoaded",function(){return init.observeCart()});