"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(d){var a,i,c=wp.i18n.__,o=d("#adfy__woofc-coupon-container"),e=1==addonifyFloatingCartJSObject.addonifyFloatingCartNotifyShow,n=addonifyFloatingCartJSObject.addonifyFloatingCartNotifyDuration,r=1==addonifyFloatingCartJSObject.addonifyFloatingCartNotifyDismissible,s=1==addonifyFloatingCartJSObject.displayToastNotificationButton,f=addonifyFloatingCartJSObject.addonifyFloatingCartNotifyMessage,l=addonifyFloatingCartJSObject.toast_notification_display_position.split("-"),_=addonifyFloatingCartJSObject.open_cart_modal_immediately_after_add_to_cart,p=addonifyFloatingCartJSObject.open_cart_modal_after_click_on_view_cart,t="1"===addonifyFloatingCartJSObject.openCartModalOnTriggerButtonHover,u=addonifyFloatingCartJSObject.hideTriggerButtonIfCartIsEmpty,y=addonifyFloatingCartJSObject.states,h=d(".adfy__woofc-cart-summary ul li.sub-total"),g=d(".adfy__woofc-cart-summary ul li.discount"),m=d(".adfy__woofc-colophon"),v=d(".adfy__woofc-shipping-bar"),w=d(".adfy__woofc-cart-summary"),C={init:function(){this.preventDefaultBehaviour(),this.showFloatingCartHandler(),this.hideFloatingCartHandler(),this.checkShoppingMeterProgessbarAnimation(),this.quantityFormInputHandler(),this.handleFloatingCartCoupon(),this.notifyFloatingCartEventHandler(),this.handleCartItems(),this.shippingSectionHandler(),this.refreshCart()},preventDefaultBehaviour:function(){d(document).on("click",".adfy__woofc-prevent-default",function(t){t.preventDefault()})},showFloatingCartHandler:function(){d(document).on("click",".adfy__show-woofc",function(){document.body.classList.add("adfy__woofc-visible")}),t&&d(document).on("mouseover",".adfy__show-woofc",function(){document.body.classList.add("adfy__woofc-visible")}),d(document).on("click",".added_to_cart.wc-forward",function(t){"1"===p&&(t.preventDefault(),document.body.classList.add("adfy__woofc-visible"))}),d(document.body).on("added_to_cart",function(t,o,a,e){var n,i;"1"===_&&document.body.classList.add("adfy__woofc-visible"),C.handleAlerts("hide"),m.hasClass("adfy__woofc-hidden")&&m.removeClass("adfy__woofc-hidden"),w.hasClass("discount")&&(n=d(".adfy__woofc-cart-summary li.sub-total"),i=d(".adfy__woofc-cart-summary li.discount"),n.hasClass("adfy__woofc-hidden")&&n.removeClass("adfy__woofc-hidden"),i.hasClass("adfy__woofc-hidden")&&i.removeClass("adfy__woofc-hidden")),v.hasClass("adfy__woofc-hidden")&&v.removeClass("adfy__woofc-hidden"),"1"===u&&C.displayHideCartTriggerBtn("show"),C.checkShoppingMeterProgessbarAnimation()}),d(document.body).on("wc_cart_emptied",function(t){m.addClass("adfy__woofc-hidden"),v.addClass("adfy__woofc-hidden"),C.checkShoppingMeterProgessbarAnimation(),"1"===u&&C.displayHideCartTriggerBtn("hide")})},hideFloatingCartHandler:function(){d(document).on("click",".adfy__hide-woofc",function(){document.body.classList.remove("adfy__woofc-visible")})},checkShoppingMeterProgessbarAnimation:function(){var t=d("#adfy__floating-cart .adfy__woofc-shipping-bar .progress-bars .live-progress-bar");t&&(100===parseInt(t.attr("data_percentage"))?t.addClass("hide-animation"):t.removeClass("hide-animation"))},notifyFloatingCartEventHandler:function(){e&&d(document).on("added_to_cart",function(t,o){a=o.product.charAt(0).toUpperCase()+o.product.slice(1),o=s?f.replace("{product_name}",a)+" "+addonifyFloatingCartJSObject.toastNotificationButton:f.replace("{product_name}",a),C.dispatchToast("success",o)})},quantityFormInputHandler:function(){function o(t,o,a){var a=2<arguments.length&&void 0!==a?a:1,e="add"===o?d(t).next():"sub"===o?d(t).prev():d(t),n=d(t).attr("data-product_id"),i=d(t).attr("data-cart_item_key"),r=d(t).parents(".adfy__woofc-item");d("#adfy__woofc-spinner-container").addClass("visible").removeClass("hidden"),d.ajax({type:"POST",dataType:"json",url:addonifyFloatingCartJSObject.ajax_url,data:{action:addonifyFloatingCartJSObject.ajax_update_cart_item_action,product_id:n,cart_item_key:i,nonce:addonifyFloatingCartJSObject.nonce,type:o,quantity:a},success:function(t){var o;t&&!t.error&&((o=t.fragments)&&d.each(o,function(t,o){d(t).replaceWith(o)}),"OoS"===(o=t.nQuantity)?(alert("Out of stock range"),e.val(o)):"nil"!==o&&e.val(o),r.find(d(".adfy__woofc-item-price-multiplier-quantity")).html(o),r.unblock(),d(document.body).trigger("wc_update_cart"))},error:function(t){var o=c("Error processing product quantity update request.","addonify-floating-cart");C.dispatchToast("error",o),console.error("Error processing product quantity update request.")}}).always(function(){d("#adfy__woofc-spinner-container").addClass("hidden").removeClass("visible"),C.checkShoppingMeterProgessbarAnimation()})}d(document).on("click",".adfy__woofc-item .adfy__woofc-inc-quantity",function(t){t.preventDefault();t=d(this).prev();(parseInt(t.val())<parseInt(t.attr("max"))||""==t.attr("max"))&&o(this,"add")}),d(document).on("click",".adfy__woofc-item .adfy__woofc-dec-quantity",function(t){t.preventDefault();t=d(this).next();parseInt(t.val())<=parseInt(t.attr("min"))||o(this,"sub")}),d(document).on("change",".adfy__woofc-item .adfy__woofc-quantity-input-field",function(t){t.preventDefault(),o(this,"update",d(this).val())})},handleFloatingCartCoupon:function(){function e(t){t=0<arguments.length&&void 0!==t&&t;!1!==t&&d(".adfy__woofc-alert.success").html('<p class="adfy__woofc-alert-text">\n                            <svg fill="currentColor" viewBox="0 0 16 16">\n                                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/>\n                            </svg>\n                            '+t+"\n                        </p>"),d(".adfy__woofc-alert.success").fadeIn(),setTimeout(function(){d(".adfy__woofc-alert.success").fadeOut()},3e3)}function n(t){t=0<arguments.length&&void 0!==t&&t;!1!==t&&d(".adfy__woofc-alert.error").html('<p class="adfy__woofc-alert-text">\n                            <svg fill="currentColor" viewBox="0 0 16 16">\n                            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/>\n                            </svg>\n                            '+t+"\n                        </p>"),d(".adfy__woofc-alert.error").fadeIn(),setTimeout(function(){d(".adfy__woofc-alert.error").fadeOut()},3e3)}d(document).on("click","#adfy__woofc-coupon-trigger",function(t){t.preventDefault(),o.attr("data_display","visible")}),d(document).on("click","#adfy__woofc-hide-coupon-container",function(){o.attr("data_display","hidden")}),d(document).on("submit","#adfy__woofc-coupon-form",function(t){t.preventDefault();var a=d(this).find("input[name=adfy__woofc-coupon-input-field]"),t=a.val();d.ajax({url:addonifyFloatingCartJSObject.ajax_url,method:"post",data:{action:addonifyFloatingCartJSObject.ajax_apply_coupon,nonce:addonifyFloatingCartJSObject.nonce,form_data:t},success:function(t){var o=JSON.parse(t);!0===o.couponApplied?(a.val(""),d.each(o.html,function(t,o){d(t).replaceWith(o)}),e(o.status),d(document.body).trigger("applied_coupon",[t]),0<o.appliedCoupons&&h.hasClass("adfy__woofc-hidden")&&g.hasClass("adfy__woofc-hidden")&&(h.removeClass("adfy__woofc-hidden"),g.removeClass("adfy__woofc-hidden"))):n(o.status)},error:function(t){var o=c("Error processing coupon request.","addonify-floating-cart");C.dispatchToast("error",o),console.error("Error processing coupon request.")}})}),d(document).on("click",".adfy__woofc-remove-applied-coupon-button",function(){var o=d(this).closest("li"),a=d(this).attr("data-coupon");d.ajax({url:addonifyFloatingCartJSObject.ajax_url,method:"post",data:{action:addonifyFloatingCartJSObject.ajax_remove_coupon,nonce:addonifyFloatingCartJSObject.nonce,form_data:a},success:function(t){t=JSON.parse(t);!0===t.couponRemoved?(d.each(t.html,function(t,o){d(t).replaceWith(o)}),d(document.body).trigger("removed_coupon",[a]),e(t.status),0!==t.appliedCoupons||h.hasClass("adfy__woofc-hidden")||g.hasClass("adfy__woofc-hidden")||(h.addClass("adfy__woofc-hidden"),g.addClass("adfy__woofc-hidden"))):n(t.status),o.remove()},error:function(t){var o=c("Error processing coupon request.","addonify-floating-cart");C.dispatchToast("error",o),console.error("Error processing coupon request.")}})})},handleCartItems:function(){d(document).on("click",".adfy__woofc-item .thumb .product-remove",function(t){t.preventDefault();var a=d(this).attr("data-product_id"),t=d(this).attr("data-cart_item_key"),e=(d(this).parents(".adfy__woofc-item"),d(this));d("#adfy__woofc-spinner-container").addClass("visible").removeClass("hidden"),d.ajax({type:"POST",dataType:"json",url:addonifyFloatingCartJSObject.ajax_url,data:{action:addonifyFloatingCartJSObject.ajax_remove_from_cart_action,product_id:a,cart_item_key:t,nonce:addonifyFloatingCartJSObject.nonce},success:function(t){var o;t&&!1!==t.success?(d(".post-"+a).find("a.wc-forward").remove(),d(".post-"+a).find("a.add_to_cart_button").removeClass("added"),(o=t.fragments)&&d.each(o,function(t,o){d(t).replaceWith(o)}),C.handleAlerts("show","info",t.undo_product_link),0===t.cart_items_count&&(d(document.body).trigger("wc_cart_emptied"),d(".adfy__woofc-content-entry").html(t.empty_cart_message)),d(document.body).trigger("removed_from_cart",[t.fragments,t.cart_hash,e]),d(document.body).trigger("wc_update_cart")):C.handleAlerts("show","error",t.message)},error:function(t){var o=c("Error processing product removal request.","addonify-floating-cart");C.dispatchToast("error",o),console.error("Error processing product removal request.")}}).always(function(){d("#adfy__woofc-spinner-container").addClass("hidden").removeClass("visible"),C.checkShoppingMeterProgessbarAnimation()})}),d(document).on("click","#adfy__woofc_restore_item",function(t){t.preventDefault();t=d(this).attr("data-item_key");d("#adfy__woofc-spinner-container").addClass("visible").removeClass("hidden"),d.ajax({type:"POST",dataType:"json",url:addonifyFloatingCartJSObject.ajax_url,data:{action:addonifyFloatingCartJSObject.ajax_restore_in_cart_action,cart_item_key:t,nonce:addonifyFloatingCartJSObject.nonce},success:function(t){t&&(t.fragments&&d.each(t.fragments,function(t,o){d(t).replaceWith(o)}),m.hasClass("adfy__woofc-hidden")&&m.removeClass("adfy__woofc-hidden"),v.hasClass("adfy__woofc-hidden")&&v.removeClass("adfy__woofc-hidden"),"1"===u&&C.displayHideCartTriggerBtn("show"),C.handleAlerts("hide"),t.error&&console.log(t.messsage))},error:function(t){var o=c("Error processing product restore request.","addonify-floating-cart");C.dispatchToast("error",o),console.error("Error processing product restore request.")}}).always(function(){d("#adfy__woofc-spinner-container").addClass("hidden").removeClass("visible"),C.checkShoppingMeterProgessbarAnimation()})})},displayHideCartTriggerBtn:function(t){var o=document.getElementById("adfy__woofc-trigger");""!==t&&null!=o&&o.hasAttribute("data_display")&&("hide"===t&&o.setAttribute("data_display","hidden"),"show"===t&&o.setAttribute("data_display","visible"))},handleAlerts:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"hide",o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"info",a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",e=d("#adfy__floating-cart #adfy__woofc-cart-errors");if(!e)throw new Error("Alert message element not found in DOM.");function n(){clearTimeout(i),e.hasClass("error")&&e.removeClass("error"),e.html(" ").addClass("hidden")}clearTimeout(i),"show"===t?""===a?console.warn("Alert data is empty, bailing out..."):("error"===o&&e.addClass("error"),e.html(" ").html(a).removeClass("hidden"),i=setTimeout(function(){n(),clearTimeout(i)},1e4)):n()},dispatchToast:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"success",o=1<arguments.length?arguments[1]:void 0;if("undefined"!=typeof Notyf){var a=new Notyf({duration:n,dismissible:r,ripple:!0,position:{x:l[1],y:l[0]}});if(""===o)throw new Error("Notification toast data/message is empty, bailing out...");"success"===t&&e&&a.success({className:"adfy__woofc-notfy-success",message:o}),"error"===t&&a.error({className:"adfy__woofc-notfy-error",message:o})}},shippingSectionHandler:function(){d(document).on("click","#adfy__woofc-shipping-trigger",function(t){t.preventDefault(),d("#adfy__woofc-shipping-container").attr("data_display","visible")}),d(document).on("click","#adfy__woofc-hide-shipping-container",function(){d("#adfy__woofc-shipping-container").attr("data_display","hidden")}),d(document).on("click","#adfy__woofc-shipping-form .adfy__woofc-shipping-address-form-toggle-button",function(t){t.preventDefault(),"none"===d(".adfy__woofc-shipping-form-elements").css("display")?d(".adfy__woofc-shipping-form-elements").show():d(".adfy__woofc-shipping-form-elements").hide()}),d(document).on("submit","#adfy__woofc-shipping-form",function(t){t.preventDefault();var t=d("#addonify_floating_cart_shipping_country").val(),o=d("#addonify_floating_cart_shipping_state").val(),a=d("#addonify_floating_cart_shipping_city").val(),e=d("#addonify_floating_cart_shipping_postcode").val(),n=d("#addonify-floating-cart-shipping-nonce").val();d.ajax({url:addonifyFloatingCartJSObject.ajax_url,method:"POST",data:{action:addonifyFloatingCartJSObject.updateShippingInfo,calc_shipping_country:t,calc_shipping_state:o,calc_shipping_city:a,calc_shipping_postcode:e,nonce:n},success:function(t){t&&t.fragments&&d.each(t.fragments,function(t,o){""!==o?d(t).replaceWith(o):d(t).html(o)})},error:function(t){var o=c("Error updating shipping address.","addonify-floating-cart");C.dispatchToast("error",o),console.error("Error updating shipping address.")}})}),d(document).on("change","#addonify_floating_cart_shipping_country",function(){var t=d(this).val(),o=d("#addonify_floating_cart_shipping_state"),a=y[t];if(o.siblings("span.select2").remove(),"object"===_typeof(a)&&0<Object.keys(a).length){var e,n,i="";for(e in a)i+='<option value="'+e+'">'+a[e]+"</option>";"input"===o.prop("tagName").toLowerCase()&&(t=o.parent(),o.remove(),(n=d(document.createElement("select"))).addClass("state_select").prop("id","addonify_floating_cart_shipping_state").prop("name","addonify_floating_cart_shipping_state"),n.prop("data-placeholder","State / County"),t.append(n)),d("#addonify_floating_cart_shipping_state").html(i)}else a instanceof Array&&0===a.length?(t=o.parent(),o.remove(),(n=d(document.createElement("input"))).addClass("input_text").prop("id","addonify_floating_cart_shipping_state").prop("name","addonify_floating_cart_shipping_state"),n.prop("type","hidden"),t.append(n)):(t=o.parent(),o.remove(),(n=d(document.createElement("input"))).addClass("input_text").prop("id","addonify_floating_cart_shipping_state").prop("name","addonify_floating_cart_shipping_state"),n.prop("placeholder","State / County"),t.append(n))}),d(document).on("change",".shipping_method",function(){var t={};d("select.shipping_method, :input[name^=shipping_method][type=radio]:checked, :input[name^=shipping_method][type=hidden]").each(function(){t[d(this).data("index")]=d(this).val()}),d("#adfy__woofc-spinner-container").addClass("visible").removeClass("hidden"),d.ajax({url:addonifyFloatingCartJSObject.ajax_url,method:"POST",data:{action:addonifyFloatingCartJSObject.updateShippingMethod,nonce:addonifyFloatingCartJSObject.nonce,shipping_method:t},success:function(t){t&&!t.error&&(t=t.fragments)&&d.each(t,function(t,o){""!==o?d(t).replaceWith(o):d(t).html(o)})},error:function(t){var o=c("Error processing shipping method update request.","addonify-floating-cart");C.dispatchToast("error",o),console.error("Error processing shipping method update request.")}}).always(function(){d("#adfy__woofc-spinner-container").addClass("hidden").removeClass("visible")})})},refreshCart:function(){d.post(addonifyFloatingCartJSObject.ajax_url,{action:addonifyFloatingCartJSObject.ajax_refresh_cart_fragments,nonce:addonifyFloatingCartJSObject.nonce},function(t){t&&!t.error&&((t=t.fragments)&&d.each(t,function(t,o){d(t).replaceWith(o)}),d(document.body).trigger("wc_update_cart"),C.checkShoppingMeterProgessbarAnimation())})}};d(document).ready(function(){C.init(),d(".adfy__woofc-alert").hide()})}(jQuery);var init={scrollbar:function(){var t=document.getElementById("adfy__woofc-scrollbar"),o=t.classList.contains("ps");null!=t&&!1===o&&new PerfectScrollbar(t,{wheelSpeed:1,wheelPropagation:!0,minScrollbarLength:20})},observeCart:function(){var t=document.getElementById("adfy__floating-cart");new MutationObserver(function(t){0<t.length&&init.scrollbar()}).observe(t,{attributes:!1,childList:!0,subtree:!0})}};document.addEventListener("DOMContentLoaded",function(){return init.observeCart()});