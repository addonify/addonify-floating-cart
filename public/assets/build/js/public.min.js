"use strict";!function(r){var e,o=r("#adfy__woofc-coupon-container"),c=1==addonifyFloatingCartJSObject.addonifyFloatingCartNotifyShow,t=addonifyFloatingCartJSObject.addonifyFloatingCartNotifyDuration,i=1==addonifyFloatingCartJSObject.addonifyFloatingCartNotifyDismissible,d=1==addonifyFloatingCartJSObject.addonifyFloatingCartNotifyShowHtmlContent,f=addonifyFloatingCartJSObject.addonifyFloatingCartNotifyMessage,l=addonifyFloatingCartJSObject.show_cart_button_label,s=addonifyFloatingCartJSObject.display_product_name_in_notification,_=addonifyFloatingCartJSObject.toast_notification_display_position.split("-"),a=addonifyFloatingCartJSObject.open_cart_modal_immediately_after_add_to_cart,n=addonifyFloatingCartJSObject.open_cart_modal_after_click_on_view_cart,u={init:function(){this.showFloatingCartHandler(),this.hideFloatingCartHandler(),this.quantityFormInputHandler(),this.handleFloatingCartCoupon(),this.notifyFloatingCartEventHandler(),this.handleCartItems()},showFloatingCartHandler:function(){r(document).on("click",".adfy__show-woofc",function(){document.body.classList.add("adfy__woofc-visible")}),r(document).on("click",".added_to_cart.wc-forward",function(t){1==n&&(t.preventDefault(),document.body.classList.add("adfy__woofc-visible"))}),r(document.body).on("added_to_cart",function(t,o){1==a&&document.body.classList.add("adfy__woofc-visible")})},hideFloatingCartHandler:function(){r(document).on("click",".adfy__hide-woofc",function(){document.body.classList.remove("adfy__woofc-visible")})},notifyFloatingCartEventHandler:function(){var a=d?"<button class='adfy__show-woofc adfy__woofc-fake-button adfy__woofc-notfy-button'>"+l+"</button>":"",n=new Notyf({duration:t,dismissible:i,ripple:!0,position:{x:_[1],y:_[0]}});r(document).on("added_to_cart",function(t,o){c&&(e=s?o.product.charAt(0).toUpperCase()+o.product.slice(1):"",n.success({className:"adfy__woofc-notfy-success",message:e+" "+f+" "+a}).on("click",function(t){t.target,t.event;d&&r("body").addClass("adfy__woofc-visible")}))})},quantityFormInputHandler:function(){function o(t,o,a){var a=2<arguments.length&&void 0!==a?a:1,n="add"===o?r(t).next():"sub"===o?r(t).prev():r(t),e=r(t).attr("data-product_id"),c=r(t).attr("data-cart_item_key"),i=r(t).parents(".adfy__woofc-item");i.block({message:null,overlayCSS:{cursor:"none"}}),r.ajax({type:"POST",dataType:"json",url:addonifyFloatingCartJSObject.ajax_url,data:{action:addonifyFloatingCartJSObject.ajax_update_cart_item_action,product_id:e,cart_item_key:c,nonce:addonifyFloatingCartJSObject.nonce,type:o,quantity:a},success:function(t){var o;t&&!t.error&&((o=t.fragments)&&r.each(o,function(t,o){r(t).replaceWith(o)}),"OoS"===(o=t.nQuantity)?(alert("Out of stock range"),n.val(o)):"nil"!==o&&n.val(o),i.find(r(".adfy__woofc-item-price-multiplier-quantity")).html(o),i.unblock(),r(document.body).trigger("wc_update_cart"))},error:function(t){console.log("Error processing request")}})}r(document).on("click",".adfy__woofc-item .adfy__woofc-inc-quantity",function(t){t.preventDefault();t=r(this).next();parseInt(t.val())<parseInt(t.attr("max"))&&o(this,"add")}),r(document).on("click",".adfy__woofc-item .adfy__woofc-dec-quantity",function(t){t.preventDefault();t=r(this).prev();parseInt(t.val())<=parseInt(t.attr("min"))||o(this,"sub")}),r(document).on("change",".adfy__woofc-item .adfy__woofc-quantity-input-field",function(t){t.preventDefault(),o(this,"update",r(this).val())})},handleFloatingCartCoupon:function(){r(document).on("click","#adfy__woofc-coupon-trigger",function(){o.attr("data_display","visible")}),r(document).on("click","#adfy__woofc-hide-coupon-container",function(){o.attr("data_display","hidden")});var t=r("#adfy__woofc-apply-coupon-button");function a(t){t=0<arguments.length&&void 0!==t&&t;!1!==t&&r(".adfy__woofc-alert.success").html('<p class="adfy__woofc-alert-text">\n                            <svg fill="currentColor" viewBox="0 0 16 16">\n                                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/>\n                            </svg>\n                            '+t+"\n                        </p>"),r(".adfy__woofc-alert.success").fadeIn(),setTimeout(function(){r(".adfy__woofc-alert.success").fadeOut()},3e3)}function n(t){t=0<arguments.length&&void 0!==t&&t;!1!==t&&r(".adfy__woofc-alert.error").html('<p class="adfy__woofc-alert-text">\n                            <svg fill="currentColor" viewBox="0 0 16 16">\n                            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/>\n                            </svg>\n                            '+t+"\n                        </p>"),r(".adfy__woofc-alert.error").fadeIn(),setTimeout(function(){r(".adfy__woofc-alert.error").fadeOut()},3e3)}r(t).on("click",function(t){console.log("ðŸ“Œ Coupon form submit button is clicked.")}),r(document).on("submit","#adfy__woofc-coupon-form",function(t){t.preventDefault();var o=r(this).find("input[name=adfy__woofc-coupon-input-field]"),t=o.val();r.ajax({url:addonifyFloatingCartJSObject.ajax_url,method:"post",data:{action:addonifyFloatingCartJSObject.ajax_apply_coupon,nonce:addonifyFloatingCartJSObject.nonce,form_data:t},success:function(t){t=JSON.parse(t);1==t.couponApplied?(o.val(""),r.each(t.html,function(t,o){r(t).replaceWith(o)}),a(t.status)):n(t.status)},error:function(t){alert("Error processing request")}})}),r(document).on("click",".adfy__woofc-remove-applied-coupon-button",function(){var o=r(this).closest("li"),t=r(this).attr("data-coupon");r.ajax({url:addonifyFloatingCartJSObject.ajax_url,method:"post",data:{action:addonifyFloatingCartJSObject.ajax_remove_coupon,nonce:addonifyFloatingCartJSObject.nonce,form_data:t},success:function(t){t=JSON.parse(t);1==t.couponRemoved?(r.each(t.html,function(t,o){r(t).replaceWith(o)}),a(t.status)):n(t.status),o.remove()},error:function(t){alert("Error processing request")}})})},handleCartItems:function(){r(document).on("click",".adfy__woofc-item .thumb .product-remove",function(t){t.preventDefault();var t=r(this).attr("data-product_id"),o=r(this).attr("data-cart_item_key"),a=r(this).parents(".adfy__woofc-item"),n=r(this);r(".post-"+t).children("a.added_to_cart").remove(),r(".post-"+t).children("a.added").removeClass("added"),a.block({message:null,overlayCSS:{cursor:"none"}}),r.ajax({type:"POST",dataType:"json",url:addonifyFloatingCartJSObject.ajax_url,data:{action:addonifyFloatingCartJSObject.ajax_remove_from_cart_action,product_id:t,cart_item_key:o,nonce:addonifyFloatingCartJSObject.nonce},success:function(t){var o;t&&!t.error&&((o=t.fragments)&&r.each(o,function(t,o){r(t).replaceWith(o)}),n.closest("div.adfy__woofc-item").remove(),r("#adfy__woofc-cart-errors").html('<a class="adfy__woofc-restore-item" id="adfy__woofc_restore_item" data-item_key="'+t.restore_cart_item_key+'"> '+t.product_name+" has been removed. Restore?</a>"),0==t.cart_items&&r(".adfy__woofc-content-entry").html(t.no_data_html),r(document.body).trigger("wc_update_cart"))},error:function(t){console.log("Error processing request")}})}),r(document).on("click","#adfy__woofc_restore_item",function(t){t.preventDefault();t=r(this).attr("data-item_key");r.ajax({type:"POST",dataType:"json",url:addonifyFloatingCartJSObject.ajax_url,data:{action:addonifyFloatingCartJSObject.ajax_restore_in_cart_action,cart_item_key:t,nonce:addonifyFloatingCartJSObject.nonce},success:function(t){t&&(clearTimeout(void 0),t.fragments,r("#adfy__woofc-cart-errors").html(""),t.error?console.log(t.messsage):1==t.no_of_items_in_cart?r("#adfy__woofc-scrollbar").html(t.item_html):r("#adfy__woofc-scrollbar").append(t.item_html))}})})}};r(document).ready(function(){u.init(),r(".adfy__woofc-alert").hide(),r(document.body).on("removed_from_cart",function(t,o){})})}(jQuery);