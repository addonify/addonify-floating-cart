"use strict";!function(i){var e,o=i("#adfy__woofc-coupon-container"),c=1==addonifyFloatingCartJSObject.addonifyFloatingCartNotifyShow,a=addonifyFloatingCartJSObject.addonifyFloatingCartNotifyDuration,d=1==addonifyFloatingCartJSObject.addonifyFloatingCartNotifyDismissible,r=1==addonifyFloatingCartJSObject.displayToastNotificationButton,f=addonifyFloatingCartJSObject.addonifyFloatingCartNotifyMessage,s=addonifyFloatingCartJSObject.toast_notification_display_position.split("-"),_=addonifyFloatingCartJSObject.open_cart_modal_immediately_after_add_to_cart,t=addonifyFloatingCartJSObject.open_cart_modal_after_click_on_view_cart,l=i(".adfy__woofc-cart-summary ul li.sub-total"),u=i(".adfy__woofc-cart-summary ul li.discount"),y=i(".adfy__woofc-colophon"),m=i(".adfy__woofc-shipping-bar"),p=i(".adfy__woofc-cart-summary"),n={init:function(){this.preventDefaultBehaviour(),this.showFloatingCartHandler(),this.hideFloatingCartHandler(),this.quantityFormInputHandler(),this.handleFloatingCartCoupon(),this.notifyFloatingCartEventHandler(),this.handleCartItems()},preventDefaultBehaviour:function(){i(document).on("click",".adfy__woofc-prevent-default",function(o){o.preventDefault()})},showFloatingCartHandler:function(){i(document).on("click",".adfy__show-woofc",function(){document.body.classList.add("adfy__woofc-visible")}),i(document).on("click",".added_to_cart.wc-forward",function(o){1==t&&(o.preventDefault(),document.body.classList.add("adfy__woofc-visible"))}),i(document.body).on("added_to_cart",function(o,a,t,n){var e,c;!0===_&&document.body.classList.add("adfy__woofc-visible"),i("#adfy__woofc-cart-errors").html(""),y.hasClass("adfy__woofc-hidden")&&y.removeClass("adfy__woofc-hidden"),p.hasClass("discount")&&(e=i(".adfy__woofc-cart-summary li.sub-total"),c=i(".adfy__woofc-cart-summary li.discount"),e.hasClass("adfy__woofc-hidden")&&e.removeClass("adfy__woofc-hidden"),c.hasClass("adfy__woofc-hidden")&&c.removeClass("adfy__woofc-hidden")),m.hasClass("adfy__woofc-hidden")&&m.removeClass("adfy__woofc-hidden")}),i(document.body).on("wc_cart_emptied",function(o){y.addClass("adfy__woofc-hidden"),m.addClass("adfy__woofc-hidden")})},hideFloatingCartHandler:function(){i(document).on("click",".adfy__hide-woofc",function(){document.body.classList.remove("adfy__woofc-visible")})},notifyFloatingCartEventHandler:function(){var t=r?addonifyFloatingCartJSObject.toastNotificationButton:"",n=new Notyf({duration:a,dismissible:d,ripple:!0,position:{x:s[1],y:s[0]}});i(document).on("added_to_cart",function(o,a){c&&(e=a.product.charAt(0).toUpperCase()+a.product.slice(1),n.success({className:"adfy__woofc-notfy-success",message:f.replace("{product_name}",e)+" "+t}).on("click",function(o){o.target,o.event;r&&i("body").addClass("adfy__woofc-visible")}))})},quantityFormInputHandler:function(){function a(o,a,t){var t=2<arguments.length&&void 0!==t?t:1,n="add"===a?i(o).next():"sub"===a?i(o).prev():i(o),e=i(o).attr("data-product_id"),c=i(o).attr("data-cart_item_key"),d=i(o).parents(".adfy__woofc-item");d.block({message:null,overlayCSS:{cursor:"none"}}),i.ajax({type:"POST",dataType:"json",url:addonifyFloatingCartJSObject.ajax_url,data:{action:addonifyFloatingCartJSObject.ajax_update_cart_item_action,product_id:e,cart_item_key:c,nonce:addonifyFloatingCartJSObject.nonce,type:a,quantity:t},success:function(o){var a;o&&!o.error&&((a=o.fragments)&&i.each(a,function(o,a){i(o).replaceWith(a)}),"OoS"===(a=o.nQuantity)?(alert("Out of stock range"),n.val(a)):"nil"!==a&&n.val(a),d.find(i(".adfy__woofc-item-price-multiplier-quantity")).html(a),d.unblock(),i(document.body).trigger("wc_update_cart"))},error:function(o){console.log("Error processing request")}})}i(document).on("click",".adfy__woofc-item .adfy__woofc-inc-quantity",function(o){o.preventDefault();o=i(this).next();(parseInt(o.val())<parseInt(o.attr("max"))||""==o.attr("max"))&&a(this,"add")}),i(document).on("click",".adfy__woofc-item .adfy__woofc-dec-quantity",function(o){o.preventDefault();o=i(this).prev();parseInt(o.val())<=parseInt(o.attr("min"))||a(this,"sub")}),i(document).on("change",".adfy__woofc-item .adfy__woofc-quantity-input-field",function(o){o.preventDefault(),a(this,"update",i(this).val())})},handleFloatingCartCoupon:function(){function n(o){o=0<arguments.length&&void 0!==o&&o;!1!==o&&i(".adfy__woofc-alert.success").html('<p class="adfy__woofc-alert-text">\n                            <svg fill="currentColor" viewBox="0 0 16 16">\n                                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/>\n                            </svg>\n                            '+o+"\n                        </p>"),i(".adfy__woofc-alert.success").fadeIn(),setTimeout(function(){i(".adfy__woofc-alert.success").fadeOut()},3e3)}function e(o){o=0<arguments.length&&void 0!==o&&o;!1!==o&&i(".adfy__woofc-alert.error").html('<p class="adfy__woofc-alert-text">\n                            <svg fill="currentColor" viewBox="0 0 16 16">\n                            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/>\n                            </svg>\n                            '+o+"\n                        </p>"),i(".adfy__woofc-alert.error").fadeIn(),setTimeout(function(){i(".adfy__woofc-alert.error").fadeOut()},3e3)}i(document).on("click","#adfy__woofc-coupon-trigger",function(){o.attr("data_display","visible")}),i(document).on("click","#adfy__woofc-hide-coupon-container",function(){o.attr("data_display","hidden")}),i(document).on("submit","#adfy__woofc-coupon-form",function(o){o.preventDefault();var t=i(this).find("input[name=adfy__woofc-coupon-input-field]"),o=t.val();i.ajax({url:addonifyFloatingCartJSObject.ajax_url,method:"post",data:{action:addonifyFloatingCartJSObject.ajax_apply_coupon,nonce:addonifyFloatingCartJSObject.nonce,form_data:o},success:function(o){var a=JSON.parse(o);console.log(a),!0===a.couponApplied?(t.val(""),i.each(a.html,function(o,a){i(o).replaceWith(a)}),n(a.status),i(document.body).trigger("applied_coupon",[o]),0<a.appliedCoupons&&l.hasClass("adfy__woofc-hidden")&&u.hasClass("adfy__woofc-hidden")&&(l.removeClass("adfy__woofc-hidden"),u.removeClass("adfy__woofc-hidden"))):e(a.status)},error:function(o){alert("Error processing request")}})}),i(document).on("click",".adfy__woofc-remove-applied-coupon-button",function(){var a=i(this).closest("li"),t=i(this).attr("data-coupon");i.ajax({url:addonifyFloatingCartJSObject.ajax_url,method:"post",data:{action:addonifyFloatingCartJSObject.ajax_remove_coupon,nonce:addonifyFloatingCartJSObject.nonce,form_data:t},success:function(o){o=JSON.parse(o);!0===o.couponRemoved?(i.each(o.html,function(o,a){i(o).replaceWith(a)}),i(document.body).trigger("removed_coupon",[t]),n(o.status),0!==o.appliedCoupons||l.hasClass("adfy__woofc-hidden")||u.hasClass("adfy__woofc-hidden")||(l.addClass("adfy__woofc-hidden"),u.addClass("adfy__woofc-hidden"))):e(o.status),a.remove()},error:function(o){alert("Error processing request")}})})},handleCartItems:function(){i(document).on("click",".adfy__woofc-item .thumb .product-remove",function(o){o.preventDefault();var t=i(this).attr("data-product_id"),o=i(this).attr("data-cart_item_key"),a=i(this).parents(".adfy__woofc-item"),n=i(this);a.block({message:null,overlayCSS:{cursor:"none"}}),i.ajax({type:"POST",dataType:"json",url:addonifyFloatingCartJSObject.ajax_url,data:{action:addonifyFloatingCartJSObject.ajax_remove_from_cart_action,product_id:t,cart_item_key:o,nonce:addonifyFloatingCartJSObject.nonce},success:function(o){var a;o&&!1!==o.success?(i(".post-"+t).find("a.wc-forward").remove(),i(".post-"+t).find("a.add_to_cart_button").removeClass("added"),(a=o.fragments)&&i.each(a,function(o,a){i(o).replaceWith(a)}),i("#adfy__woofc-cart-errors").html(o.undo_product_link),0===o.cart_items_count&&(i(document.body).trigger("wc_cart_emptied"),i(".adfy__woofc-content-entry").html(o.empty_cart_message)),i(document.body).trigger("removed_from_cart",[o.fragments,o.cart_hash,n]),i(document.body).trigger("wc_update_cart")):i("#adfy__woofc-cart-errors").html(o.message)},error:function(o){console.log("Error processing request")}})}),i(document).on("click","#adfy__woofc_restore_item",function(o){o.preventDefault();o=i(this).attr("data-item_key");i.ajax({type:"POST",dataType:"json",url:addonifyFloatingCartJSObject.ajax_url,data:{action:addonifyFloatingCartJSObject.ajax_restore_in_cart_action,cart_item_key:o,nonce:addonifyFloatingCartJSObject.nonce},success:function(o){o&&(o.fragments&&i.each(o.fragments,function(o,a){i(o).replaceWith(a)}),y.hasClass("adfy__woofc-hidden")&&y.removeClass("adfy__woofc-hidden"),m.hasClass("adfy__woofc-hidden")&&m.removeClass("adfy__woofc-hidden"),i("#adfy__woofc-cart-errors").html(""),o.error&&console.log(o.messsage))}})})}};i(document).ready(function(){n.init(),i(".adfy__woofc-alert").hide()})}(jQuery);